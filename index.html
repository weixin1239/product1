<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>飞机大战</title>
	</head>
	<body>
		
	</body>
</html>
<script type="text/javascript" src="js/tools.js"></script>
<script type="text/javascript">
//有哪些对象？  敌机和我方战机，子弹，地图，玩家（积分）      公共的对象：移动的物体
//逻辑思路：1.出现地图   2.我方战机出现    3.敌方战机出现    4.我方战机发射子弹

"use strict"
//定义地图
function Map(obj){
	this.width = obj.width;
	this.height = obj.height;
	this.imgPath = obj.imgPath;
	this.domId = obj.domId;
	
}
	
	
//定义对象：移动的物体  下面都是移动物体共有的属性，写到父对象Mover里面，后面用的时候，可以直接从父对象继承
function Mover(obj){
	if(obj){//在这里做if判断，是为了在我们想继承的时候在使用到这些属性
	this.width = obj.width;
	this.height = obj.height;
	this.imgPath = obj.imgPath;
	//当前位置
	this.left = obj.left;
	this.top = obj.top;
	
	//横向增量和纵向增量
	this.incLeft = obj.incLeft;
	this.incTop = obj.incTop;
	
	//时间间隔
	this.timeSpace = obj.timeSpace;
	//定时器对象
	this.timer = obj.timer;
	//边界
	this.minLeft = obj.minLeft;
	this.maxLeft = obj.maxLeft;
	this.minTop = obj.minTop;
	this.maxTop = obj.maxTop;
	
	//对应界面上元素id
	this.domId = obj.domId;
	//所属地图
	this.map = obj.map;
	}
}


Mover.prototype.initUI = function(){
	//动态创建img
	let img = $create("<img>");
	img.id = this.domId;
	img.src = this.imgPath;
	img.style.cssText = "position:absolute;left:"+this.left+"px;top:"+this.top+"px;"; 
	$(this.map.domId).appendChild(img);
}

//移动，主要是定时器
Mover.prototype.go = function(){
	if(this.timer){
		window.clearInterval(this.timer);
	}
	var obj = this;
	this.timer = setInterval(function(){
		obj.goStep()
	},this.timeSpace);
}

//移动一步
Mover.prototype.goStep = function(){
	//根据方向和增量，改变当前的位置
	this.left += this.incLeft;
	this.top += this.incTop;
	//边界处理（不同的子对象，对于边界处理的方式不同）
	
	if(this.left<minLeft){
		this.left = minLeft;
	}
	if(this.left>maxLeft){
		this.left = maxLeft;
	}
	
	if(this.top<minTop){
		this.top = minTop;
	}
	if(this.top>maxTop){
		this.top = maxTop;
	}
	
	//改界面
	$(this.domId).style.left = this.left+"px";
	$(this.domId).style.top = this.top+"px";
}

//自删
Mover.prototype.over = function(){
	
	
	
	
}

//我方战机
function MyPlane(moverObj,planeObj){
	//我方战机的默认位置在左下角
	moverObj.left = 0;
	moverObj.top = moverObj.map.height - moverObj.height;
	
	//边界
	moverObj.minLeft = 0;
	moverObj.maxLeft = moverObj.map.width - moverObj.width; 
	moverObj.minTop = 0;
	moverObj.maxTop = moverObj.map.height - moverObj.height;
}
</script>